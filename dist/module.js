/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data","@emotion/css","@grafana/runtime","rxjs"],(function(e,t,n,r,a,o){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=95)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){var r=n(20),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(10)(Object,"create");e.exports=r},function(e,t,n){var r=n(13);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(77);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(37),a=n(44);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(12),a=n(39),o=n(40),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},function(e,t,n){var r=n(4).Symbol;e.exports=r},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(19),a=n(21);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t){e.exports=a},function(e,t,n){"use strict";e.exports=n(30)},function(e,t,n){var r=n(18),a=n(31),o=n(33);e.exports=function(e,t){return o(a(e,t,r),e+"")}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(11),a=n(5);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(38))},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(50),a=n(6),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){e.exports=o},function(e,t,n){var r=n(17),a=n(13),o=n(46),i=n(47),s=Object.prototype,l=s.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(r=1);++n<r;)for(var c=t[n],p=i(c),d=-1,h=p.length;++d<h;){var f=p[d],v=e[f];(void 0===v||a(v,s[f])&&!l.call(e,f))&&(e[f]=c[f])}return e}));e.exports=u},function(e,t,n){var r=n(59),a=n(91),o=n(17),i=n(94),s=o((function(e,t){return i(e)?r(e,a(t,1,i,!0)):[]}));e.exports=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=n(0),i=(r=o)&&"object"==typeof r&&"default"in r?r.default:r,s=n(1),l=n(2),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2"];(a=t.AwsAuthType||(t.AwsAuthType={})).Keys="keys",a.Credentials="credentials",a.Default="default",a.EC2IAMRole="ec2_iam_role",a.ARN="arn";var p=[{label:"Workspace IAM Role",value:t.AwsAuthType.EC2IAMRole},{label:"AWS SDK Default",value:t.AwsAuthType.Default},{label:"Access & secret key",value:t.AwsAuthType.Keys},{label:"Credentials file",value:t.AwsAuthType.Credentials}],d=function(e){return{value:e,label:e}};t.ConnectionConfig=function(e){var n,r,a,h,f,v,y,m,g,b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}(o.useState((e.standardRegions||c).map(d)),2),E=b[0],A=b[1],I=e.loadRegions,w=e.onOptionsChange,S=e.skipHeader,C=void 0!==S&&S,_=e.skipEndpoint,x=void 0!==_&&_,O=e.options,P=O.jsonData.profile;void 0===P&&(P=O.database);var D=window.grafanaBootData.settings,T=null!==(n=D.awsAllowedAuthProviders)&&void 0!==n?n:[t.AwsAuthType.Default,t.AwsAuthType.Keys,t.AwsAuthType.Credentials],j=null===(r=D.awsAssumeRoleEnabled)||void 0===r||r,N=p.find((function(e){return e.value===O.jsonData.authType}));return o.useEffect((function(){!N&&T.length&&w(u(u({},O),{jsonData:u(u({},O.jsonData),{authType:T[0]})}))}),[N,O,w]),o.useEffect((function(){I&&I().then((function(e){return A(e.map(d))}))}),[I]),i.createElement(s.FieldSet,{label:C?"":"Connection Details","data-testid":"connection-config"},i.createElement(s.InlineField,{label:"Authentication Provider",labelWidth:28,tooltip:"Specify which AWS credentials chain to use."},i.createElement(s.Select,{className:"width-30",value:N,options:p.filter((function(e){return T.includes(e.value)})),defaultValue:O.jsonData.authType,onChange:function(t){l.onUpdateDatasourceJsonDataOptionSelect(e,"authType")(t)}})),"credentials"===O.jsonData.authType&&i.createElement(s.InlineField,{label:"Credentials Profile Name",labelWidth:28,tooltip:"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default."},i.createElement(s.Input,{className:"width-30",placeholder:"default",value:P,onChange:l.onUpdateDatasourceJsonDataOption(e,"profile")})),"keys"===O.jsonData.authType&&i.createElement(i.Fragment,null,i.createElement(s.InlineField,{label:"Access Key ID",labelWidth:28},(null===(a=e.options.secureJsonFields)||void 0===a?void 0:a.accessKey)?i.createElement(s.ButtonGroup,{className:"width-30"},i.createElement(s.Input,{disabled:!0,placeholder:"Configured"}),i.createElement(s.ToolbarButton,{icon:"edit",tooltip:"Edit Access Key ID",type:"button",onClick:l.onUpdateDatasourceResetOption(e,"accessKey")})):i.createElement(s.Input,{className:"width-30",value:null!==(f=null===(h=O.secureJsonData)||void 0===h?void 0:h.accessKey)&&void 0!==f?f:"",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,"accessKey")})),i.createElement(s.InlineField,{label:"Secret Access Key",labelWidth:28},(null===(v=e.options.secureJsonFields)||void 0===v?void 0:v.secretKey)?i.createElement(s.ButtonGroup,{className:"width-30"},i.createElement(s.Input,{disabled:!0,placeholder:"Configured"}),i.createElement(s.ToolbarButton,{icon:"edit",type:"button",tooltip:"Edit Secret Access Key",onClick:l.onUpdateDatasourceResetOption(e,"secretKey")})):i.createElement(s.Input,{className:"width-30",value:null!==(m=null===(y=O.secureJsonData)||void 0===y?void 0:y.secretKey)&&void 0!==m?m:"",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,"secretKey")}))),j&&i.createElement(i.Fragment,null,i.createElement(s.InlineField,{label:"Assume Role ARN",labelWidth:28,tooltip:"Optionally, specify the ARN of a role to assume. Specifying a role here will ensure that the selected authentication provider is used to assume the specified role rather than using the credentials directly. Leave blank if you don't need to assume a role at all"},i.createElement(s.Input,{className:"width-30",placeholder:"arn:aws:iam:*",value:O.jsonData.assumeRoleArn||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"assumeRoleArn")})),i.createElement(s.InlineField,{label:"External ID",labelWidth:28,tooltip:"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here."},i.createElement(s.Input,{className:"width-30",placeholder:"External ID",value:O.jsonData.externalId||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"externalId")}))),!x&&i.createElement(s.InlineField,{label:"Endpoint",labelWidth:28,tooltip:"Optionally, specify a custom endpoint for the service"},i.createElement(s.Input,{className:"width-30",placeholder:null!==(g=e.defaultEndpoint)&&void 0!==g?g:"https://{service}.{region}.amazonaws.com",value:O.jsonData.endpoint||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"endpoint")})),i.createElement(s.InlineField,{label:"Default Region",labelWidth:28,tooltip:"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region."},i.createElement(s.Select,{className:"width-30",value:E.find((function(e){return e.value===O.jsonData.defaultRegion})),options:E,defaultValue:O.jsonData.defaultRegion,allowCustomValue:!0,onChange:l.onUpdateDatasourceJsonDataOptionSelect(e,"defaultRegion"),formatCreateLabel:function(e){return"Use region: "+e}})),e.children)},t.awsAuthProviderOptions=p,t.standardRegions=c},function(e,t,n){var r=n(32),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),l=Array(s);++i<s;)l[i]=o[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=o[i];return u[t]=n(l),r(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(34),a=n(45)(r);e.exports=a},function(e,t,n){var r=n(35),a=n(36),o=n(18),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(10),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){var r=n(19),a=n(41),o=n(5),i=n(43),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,d=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?d:s).test(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(12),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,a=n(42),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(4)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(13),a=n(14),o=n(22),i=n(5);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(48),a=n(56),o=n(14);e.exports=function(e){return o(e)?r(e,!0):a(e)}},function(e,t,n){var r=n(49),a=n(23),o=n(24),i=n(51),s=n(22),l=n(53),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&a(e),p=!n&&!c&&i(e),d=!n&&!c&&!p&&l(e),h=n||c||p||d,f=h?r(e.length,String):[],v=f.length;for(var y in e)!t&&!u.call(e,y)||h&&("length"==y||p&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||f.push(y);return f}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(11),a=n(6);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t,n){(function(e){var r=n(4),a=n(52),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||a;e.exports=l}).call(this,n(25)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(54),a=n(26),o=n(55),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},function(e,t,n){var r=n(11),a=n(21),o=n(6),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},function(e,t,n){(function(e){var r=n(20),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,n(25)(e))},function(e,t,n){var r=n(5),a=n(57),o=n(58),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(60),a=n(83),o=n(88),i=n(89),s=n(26),l=n(90);e.exports=function(e,t,n,u){var c=-1,p=a,d=!0,h=e.length,f=[],v=t.length;if(!h)return f;n&&(t=i(t,s(n))),u?(p=o,d=!1):t.length>=200&&(p=l,d=!1,t=new r(t));e:for(;++c<h;){var y=e[c],m=null==n?y:n(y);if(y=u||0!==y?y:0,d&&m==m){for(var g=v;g--;)if(t[g]===m)continue e;f.push(y)}else p(t,m,u)||f.push(y)}return f}},function(e,t,n){var r=n(61),a=n(81),o=n(82);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},function(e,t,n){var r=n(62),a=n(76),o=n(78),i=n(79),s=n(80);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(63),a=n(69),o=n(75);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(e,t,n){var r=n(64),a=n(65),o=n(66),i=n(67),s=n(68);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(7);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(7),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(7),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(70),a=n(71),o=n(72),i=n(73),s=n(74);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(8),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(8);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(10)(n(4),"Map");e.exports=r},function(e,t,n){var r=n(9);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(9);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(9);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(9);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(84);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(85),a=n(86),o=n(87);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,a,n)}},function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(92),a=n(93);e.exports=function e(t,n,o,i,s){var l=-1,u=t.length;for(o||(o=a),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,i,s):r(s,c):i||(s[s.length]=c)}return s}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(12),a=n(23),o=n(24),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},function(e,t,n){var r=n(14),a=n(6);e.exports=function(e){return a(e)&&r(e)}},function(e,t,n){"use strict";n.r(t);var r=n(2),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function p(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e}function d(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}Object.create;var h,f,v,y,m,g=n(15);function b(e){return(null==e?void 0:e.queryType)===h.ListAssociatedAssets}function E(e){return(null==e?void 0:e.queryType)===h.PropertyAggregate}!function(e){e.ListAssetModels="ListAssetModels",e.ListAssets="ListAssets",e.ListAssociatedAssets="ListAssociatedAssets",e.DescribeAsset="DescribeAsset",e.PropertyValue="PropertyValue",e.PropertyValueHistory="PropertyValueHistory",e.PropertyAggregate="PropertyAggregate"}(h||(h={})),function(e){e.ANY="ANY",e.GOOD="GOOD",e.BAD="BAD",e.UNCERTAIN="UNCERTAIN"}(f||(f={})),function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(v||(v={})),function(e){e.Auto="AUTO",e.Min="1m",e.Hour="1h",e.Day="1d"}(y||(y={})),function(e){e.AVERAGE="AVERAGE",e.COUNT="COUNT",e.MAXIMUM="MAXIMUM",e.MINIMUM="MINIMUM",e.SUM="SUM",e.STANDARD_DEVIATION="STANDARD_DEVIATION"}(m||(m={}));var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function I(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function w(e){return"function"==typeof e}var S=!1,C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e);S=e},get useDeprecatedSynchronousErrorHandling(){return S}};function _(e){setTimeout((function(){throw e}),0)}var x={closed:!0,next:function(e){},error:function(e){if(C.useDeprecatedSynchronousErrorHandling)throw e;_(e)},complete:function(){}},O=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var P=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),D=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,r=this._parentOrParents,a=this._ctorUnsubscribe,o=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(w(o)){a&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof P?T(e.errors):[e]}}if(O(i)){s=-1;for(var l=i.length;++s<l;){var u=i[s];if(null!==(n=u)&&"object"==typeof n)try{u.unsubscribe()}catch(e){t=t||[],e instanceof P?t=t.concat(T(e.errors)):t.push(e)}}}if(t)throw new P(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=n._parentOrParents;if(null===a)n._parentOrParents=this;else if(a instanceof e){if(a===this)return n;n._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return n;a.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function T(e){return e.reduce((function(e,t){return e.concat(t instanceof P?t.errors:t)}),[])}var j=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),N=function(e){function t(n,r,a){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=x;break;case 1:if(!n){o.destination=x;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new R(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new R(o,n,r,a)}return o}return I(t,e),t.prototype[j]=function(){return this},t.create=function(e,n,r){var a=new t(e,n,r);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(D),R=function(e){function t(t,n,r,a){var o,i=e.call(this)||this;i._parentSubscriber=t;var s=i;return w(n)?o=n:n&&(o=n.next,r=n.error,a=n.complete,n!==x&&(w((s=Object.create(n)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=r,i._complete=a,i}return I(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;C.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=C.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):_(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;_(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};C.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw e;_(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return C.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(_(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(N);function M(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new F(e,t))}}var F=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new L(e,this.project,this.thisArg))},e}(),L=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.project=n,a.count=0,a.thisArg=r||a,a}return I(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(N),U=function(){function e(e,t){this.ds=e,this.region=t,this.assetsById=new Map}return e.prototype.getAssetInfo=function(e){return s(this,void 0,Promise,(function(){var t,n=this;return l(this,(function(a){return(t=this.assetsById.get(e))?[2,Promise.resolve(t)]:[2,this.ds.runQuery({refId:"getAssetInfo",queryType:h.DescribeAsset,assetId:e,region:this.region},1e3).pipe(M((function(t){if(t.data.length){var a=new r.DataFrameView(t.data[0]);if(a&&a.length){var o=function(e){var t,n,r=JSON.parse(e.properties),a=JSON.parse(e.hierarchies);try{for(var o=u(r),s=o.next();!s.done;s=o.next()){var l=s.value;l.value=l.Id,l.label=l.Name,l.Unit&&(l.label+=" ("+l.Unit+")"),l.DataType&&(l.description=l.DataType,l.Alias&&(l.description+=" // "+l.Alias))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i(i({},e),{properties:r,hierarchy:a.map((function(e){return{label:e.Name,value:e.Id}}))})}(a.get(0));return n.assetsById.set(e,o),o}}throw"asset not found"}))).toPromise()]}))}))},e.prototype.getAssetInfoSync=function(e){var t=this,n=this.assetsById.get(e);if(n)return n;try{s(t,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this.getAssetInfo(e)];case 1:return[2,t.sent()]}}))}))}catch(e){}return this.assetsById.get(e)},e.prototype.getModels=function(){return s(this,void 0,Promise,(function(){var e=this;return l(this,(function(t){return this.models?[2,Promise.resolve(this.models)]:[2,this.ds.runQuery({refId:"getModels",queryType:h.ListAssetModels,region:this.region}).pipe(M((function(t){if(t.data.length)return e.models=new r.DataFrameView(t.data[0]),e.models;throw"no models found"}))).toPromise()]}))}))},e.prototype.getAssetsOfType=function(e){return s(this,void 0,Promise,(function(){var t,n=this;return l(this,(function(a){return t={refId:"getAssetsOfType",queryType:h.ListAssets,filter:"ALL",modelId:e,region:this.region},[2,this.ds.runQuery(t,1e3).pipe(M((function(e){if(e.data.length)return n.topLevelAssets=new r.DataFrameView(e.data[0]),n.topLevelAssets;throw"no assets found"}))).toPromise()]}))}))},e.prototype.getAssociatedAssets=function(e,t){return s(this,void 0,Promise,(function(){var n;return l(this,(function(a){return n={queryType:h.ListAssociatedAssets,refId:"associatedAssets",assetId:e,hierarchyId:t,region:this.region},[2,this.ds.runQuery(n,1e3).pipe(M((function(e){if(e.data.length)return new r.DataFrameView(e.data[0]);throw"no asset hierarchy found"}))).toPromise()]}))}))},e.prototype.getTopLevelAssets=function(){return s(this,void 0,Promise,(function(){var e,t=this;return l(this,(function(n){return this.topLevelAssets?[2,Promise.resolve(this.topLevelAssets)]:(e={refId:"topLevelAssets",queryType:h.ListAssets,filter:"TOP_LEVEL",region:this.region},[2,this.ds.runQuery(e,1e3).pipe(M((function(e){if(e.data.length)return t.topLevelAssets=new r.DataFrameView(e.data[0]),t.topLevelAssets;throw"no assets found"}))).toPromise()])}))}))},e.prototype.getAssetPickerOptions=function(){return s(this,void 0,Promise,(function(){var e,t,n,r,a,o,i,s,c,p,d;return l(this,(function(l){switch(l.label){case 0:e=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.getTopLevelAssets()];case 2:t=l.sent();try{for(n=u(t),r=n.next();!r.done;r=n.next())i=r.value,e.push({label:i.name,value:i.id,description:i.arn})}catch(e){s={error:e}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(s)throw s.error}}return[3,4];case 3:return l.sent(),[3,4];case 4:try{for(a=u(this.assetsById.values()),o=a.next();!o.done;o=a.next())i=o.value,e.push({label:i.name,value:i.id,description:i.arn})}catch(e){p={error:e}}finally{try{o&&!o.done&&(d=a.return)&&d.call(a)}finally{if(p)throw p.error}}return[2,e]}}))}))},e}();function q(e){var t,n,r=[];try{for(var a=u(e.toArray()),o=a.next();!o.done;o=a.next()){var s=o.value,l=JSON.parse(s.hierarchies);r.push(i(i({},s),{properties:[],hierarchy:l.map((function(e){return{label:e.Name,value:e.Id}}))}))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}var k=n(27);function V(e){var t,n,a=e.refId+"/"+e.fields.length;try{for(var o=u(e.fields),i=o.next();!i.done;i=o.next()){var s=i.value;a+="|"+s.name+":"+s.type,s.labels&&(a+=Object(r.formatLabels)(s.labels))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a}var Q=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.annotations={},n.options=t.jsonData,n}return o(t,e),t.prototype.getCache=function(e){e&&"default"!==e||(e=this.options.defaultRegion||"");var t=this.cache.get(e);return t||(t=new U(this,e),this.cache.set(e,t)),t},t.prototype.filterQuery=function(e){return!!e.queryType&&((t=e.queryType)!==h.PropertyAggregate&&t!==h.PropertyValue&&t!==h.PropertyValueHistory||Boolean(e.assetId&&e.propertyId||e.propertyAlias));var t},t.prototype.getQueryDisplayText=function(e){var t=this.getCache(e.region),n=e.queryType;if(e.assetId){var r=t.getAssetInfoSync(e.assetId);if(!r)return n+" / "+e.assetId;if(n+=" / "+r.name,e.propertyId&&r.properties){var a=r.properties.find((function(t){return t.Id===e.propertyId}));n+=a?" / "+a.Name:" / "+e.propertyId}}return n},t.prototype.applyTemplateVariables=function(e,t){var n=Object(g.getTemplateSrv)();return i(i({},e),{region:n.replace(e.region||"",t),assetId:n.replace(e.assetId||"",t),propertyId:n.replace(e.propertyId||"",t)})},t.prototype.runQuery=function(e,t){return this.query({targets:[e],requestId:"iot."+G++,maxDataPoints:t})},t.prototype.query=function(t){var n,a,o=this;return n=t,a={getNextQueries:function(e){var n,r,a,o;if(null===(a=e.data)||void 0===a?void 0:a.length){var s=[],l=function(e){var n=null===(o=e.meta)||void 0===o?void 0:o.custom;if(n&&n.nextToken){var r=t.targets.find((function(t){return t.refId===e.refId}));r&&s.push(i(i({},r),{nextToken:n.nextToken}))}};try{for(var c=u(e.data),p=c.next();!p.done;p=c.next())l(p.value)}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(s.length)return s}},query:function(t){return e.prototype.query.call(o,t)},process:function(e,t,n){return e.data?e.data=function(e,t){var n,a,o,s,l,c,p=new Map,d=[];try{for(var h=u(e),f=h.next();!f.done;f=h.next())if((S=f.value).length){var v=V(S);if(S instanceof r.MutableDataFrame)p.set(v,S),d.push(S);else{var y=new r.MutableDataFrame;y.meta=S.meta,y.name=S.name,y.refId=S.refId;try{for(var m=(o=void 0,u(S.fields)),g=m.next();!g.done;g=m.next()){for(var b=g.value,E=[],A=0;A<S.length;A++)E.push(b.values.get(A));y.addField(i(i({},b),{values:new r.ArrayVector(E)}))}}catch(e){o={error:e}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}p.set(v,y),d.push(y)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}try{for(var I=u(t),w=I.next();!w.done;w=I.next()){var S;if((S=w.value).length){v=V(S);var C=p.get(v);if(C)for(A=0;A<S.length;A++)for(var _=0;_<C.fields.length;_++)C.fields[_].values.add(S.fields[_].values.get(A));else d.push(S)}}}catch(e){l={error:e}}finally{try{w&&!w.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}return d}(e.data,t):e.data=t,e.data},onCancel:function(e){}},new k.Observable((function(e){var t=void 0,o=void 0,s={fetchStartTime:Date.now(),fetchEndTime:void 0},l=r.LoadingState.Loading,u=1,c={next:function(o){s.fetchEndTime=Date.now(),(l=o.state)!==r.LoadingState.Error&&(t=a.getNextQueries(o),l=t?r.LoadingState.Streaming:r.LoadingState.Done);var u=a.process(s,o.data,!t);e.next(i(i({},o),{data:u,state:l,key:n.requestId}))},error:function(t){e.error(t)},complete:function(){o&&(o.unsubscribe(),o=void 0),t?(s.fetchEndTime=void 0,s.fetchStartTime=Date.now(),o=a.query(i(i({},n),{requestId:n.requestId+"."+ ++u,startTime:s.fetchStartTime,targets:t})).subscribe(c),t=void 0):e.complete()}};return o=a.query(n).subscribe(c),function(){t=void 0,c.complete(),s.fetchEndTime||a.onCancel(s)}}))},t}(g.DataSourceWithBackend),G=1e3,B=n(0),W=n.n(B),H=n(1),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={index:0},t.renderInfo=function(e,t){var n,r,a=null===(n=e.meta)||void 0===n?void 0:n.custom;return a?W.a.createElement("div",{key:t},a.resolution&&W.a.createElement("div",null,W.a.createElement("h3",null,"Resolution"),W.a.createElement(H.Tag,{name:a.resolution,colorIndex:1}),W.a.createElement("br",null),W.a.createElement("br",null)),(null===(r=a.aggregates)||void 0===r?void 0:r.length)&&W.a.createElement("div",null,W.a.createElement("h3",null,"Aggregates"),a.aggregates.map((function(e){return W.a.createElement(W.a.Fragment,null,W.a.createElement(H.Tag,{name:e,key:e,colorIndex:1}),"  ")})))):null},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.data;return t&&t.length?W.a.createElement("div",null,t.map((function(t,n){return e.renderInfo(t,n)}))):W.a.createElement("div",null,"No Data")},t}(B.PureComponent),z=n(16),K=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2","Edge"],$=K.map((function(e){return{value:e,label:e}})),Y=[{value:"default",label:"Standard",description:"Use the authentication provider configured above"},{value:"linux",label:"Linux",description:"Linux-based authentication"},{value:"ldap",label:"LDAP",description:"LDAP-based authentication"}],X=function(e){function t(t){var n=e.call(this,t)||this;return n.onUserChange=function(e){Object(r.updateDatasourcePluginJsonDataOption)(n.props,"edgeAuthUser",e.target.value)},n.onPasswordChange=function(e){var t=n.props,r=t.options;(0,t.onOptionsChange)(i(i({},r),{secureJsonData:{edgeAuthPass:e.target.value}}))},n.onResetPassword=function(){var e=n.props,t=e.options;(0,e.onOptionsChange)(i(i({},t),{secureJsonFields:i(i({},t.secureJsonFields),{password:!1}),secureJsonData:i(i({},t.secureJsonData),{edgeAuthPass:""})}))},n.state={},n}return o(t,e),t.prototype.renderEdgeConfig=function(){var e,t,n,a,o,s,l=this,u=this.props.options,c=u.jsonData,p=c.endpoint,d=null!==(e=Y.find((function(e){return e.value===c.edgeAuthMode})))&&void 0!==e?e:Y[0],h=d!==Y[0],f=K.map((function(e){return{value:e,label:e}}));return W.a.createElement(W.a.Fragment,null,h&&W.a.createElement(H.FieldSet,{label:"Connection Details","data-testid":"connection-config"},W.a.createElement(H.InlineField,{label:"Endpoint",labelWidth:28,tooltip:"Optionally, specify a custom endpoint for the service"},W.a.createElement(H.Input,{className:"width-30",placeholder:null!==(t=this.props.defaultEndpoint)&&void 0!==t?t:"https://{service}.{region}.amazonaws.com",value:u.jsonData.endpoint||"",onChange:Object(r.onUpdateDatasourceJsonDataOption)(this.props,"endpoint")})),W.a.createElement(H.InlineField,{label:"Default Region",labelWidth:28,tooltip:"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region."},W.a.createElement(H.Select,{className:"width-30",value:f.find((function(e){return e.value===u.jsonData.defaultRegion})),options:f,defaultValue:u.jsonData.defaultRegion,allowCustomValue:!0,onChange:Object(r.onUpdateDatasourceJsonDataOptionSelect)(this.props,"defaultRegion"),formatCreateLabel:function(e){return"Use region: "+e}}))),!h&&W.a.createElement(z.ConnectionConfig,i({},this.props,{standardRegions:K})),W.a.createElement(H.FieldSet,{label:"Edge settings","data-testid":"edge-connection"},!p&&W.a.createElement(H.Alert,{title:"Edge region requires an explicit endpoint configured above",severity:"warning"}),W.a.createElement(H.InlineFieldRow,null,W.a.createElement(H.InlineField,{label:"Authentication Mode",labelWidth:28,tooltip:"Specify which authentication method to use."},W.a.createElement(H.Select,{className:"width-30",options:Y,value:d,onChange:function(e){Object(r.updateDatasourcePluginJsonDataOption)(l.props,"edgeAuthMode",e.value)}}))),h&&W.a.createElement(W.a.Fragment,null,W.a.createElement(H.InlineFieldRow,null,W.a.createElement(H.InlineField,{label:"Username",labelWidth:28,tooltip:"The username set to local authentication proxy"},W.a.createElement(H.Input,{name:"username",value:c.edgeAuthUser,autoComplete:"off",className:"width-30",onChange:this.onUserChange,required:!0}))),W.a.createElement(H.InlineFieldRow,null,W.a.createElement(H.InlineField,{label:"Password",labelWidth:28,tooltip:"The password sent to local authenticaion proxy"},W.a.createElement(H.Input,{type:"password",name:"password",autoComplete:"off",placeholder:(null===(n=u.secureJsonFields)||void 0===n?void 0:n.edgeAuthPass)?"configured":"",value:null!==(o=null===(a=u.secureJsonData)||void 0===a?void 0:a.edgeAuthPass)&&void 0!==o?o:"",onChange:this.onPasswordChange,onReset:this.onResetPassword,className:"width-30",required:!0})))),W.a.createElement(H.InlineFieldRow,null,W.a.createElement(H.InlineField,{label:"SSL Certificate",labelWidth:28,tooltip:"Certificate for SSL enabled authentication."},(null===(s=u.secureJsonFields)||void 0===s?void 0:s.cert)?W.a.createElement(H.Button,{variant:"secondary",type:"reset",onClick:Object(r.onUpdateDatasourceResetOption)(this.props,"cert")},"Reset"):W.a.createElement("textarea",{rows:7,className:"gf-form-input gf-form-textarea width-30",onChange:function(e){Object(r.updateDatasourcePluginSecureJsonDataOption)(l.props,"cert",e.target.value)},placeholder:"Begins with -----BEGIN CERTIFICATE------",required:!0})))))},t.prototype.render=function(){return"Edge"===this.props.options.jsonData.defaultRegion?this.renderEdgeConfig():W.a.createElement(z.ConnectionConfig,i({},this.props,{standardRegions:K}))},t}(B.PureComponent),Z=n(28),ee=n.n(Z),te=[{label:"Get property value aggregates",value:h.PropertyAggregate,description:"Gets aggregated values for an asset property.",defaultQuery:{resolution:y.Auto,aggregates:[m.AVERAGE],timeOrdering:"ASCENDING"},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_GetAssetPropertyAggregates.html"},{label:"Get property value history",value:h.PropertyValueHistory,description:"Gets the history of an asset property's value.",defaultQuery:{timeOrdering:"ASCENDING"},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_GetAssetPropertyAggregates.html"},{label:"Get property value",value:h.PropertyValue,description:"Gets an asset property's current value.",defaultQuery:{},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_GetAssetPropertyAggregates.html"},{label:"List assets",value:h.ListAssets,description:"Retrieves a paginated list of asset summaries.",defaultQuery:{filter:"TOP_LEVEL"},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_GetAssetPropertyAggregates.html"},{label:"List asset models",value:h.ListAssetModels,description:"Retrieves this list of all asset models",defaultQuery:{},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_GetAssetPropertyAggregates.html"},{label:"List associated assets",value:h.ListAssociatedAssets,description:"Retrieves a paginated list of associated assets.",defaultQuery:{},helpURL:"https://docs.aws.amazon.com/iot-sitewise/latest/APIReference/API_ListAssociatedAssets.html"}];function ne(e,t){if(e.queryType===t.value)return e;var n=i(i(i({},t.defaultQuery),e),{queryType:t.value}),r=n;return b(n)&&(delete r.timeOrdering,delete r.filter,delete r.resolution,delete r.aggregates),n}function re(e,t){if((null==e?void 0:e.properties)&&t)return e.properties.find((function(e){return e.Id===t}))}function ae(e){return"STRING"===(null==e?void 0:e.DataType)?m.COUNT:m.AVERAGE}var oe,ie,se,le,ue=[{label:"Top Level",value:"TOP_LEVEL",description:"The list includes only top-level assets in the asset hierarchy tree"},{label:"All",value:"ALL",description:"The list includes all assets for a given asset model ID"}],ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onAssetModelIdChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{modelId:e.value})),o()},t.onFilterChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{filter:e.value})),o()},t}return o(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return e=this.props.query,[4,this.props.datasource.getCache(e.region).getModels()];case 1:return t=n.sent(),this.setState({models:t}),[2]}}))}))},t.prototype.render=function(){var e=this.props.query,t=this.state.models,n=t?t.map((function(e){return{value:e.id,label:e.name,description:e.description}})):[],r=n.find((function(t){return t.value===e.modelId}));return e.modelId&&!r&&(r={value:e.modelId,label:"Model ID: "+e.modelId,description:""}),W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Model ID",labelWidth:Re,grow:!0},W.a.createElement(H.Select,{isLoading:!t,options:n,value:r,onChange:this.onAssetModelIdChange,placeholder:"Select an asset model id",allowCustomValue:!0,isClearable:!0,isSearchable:!0,formatCreateLabel:function(e){return"Model ID: "+e},menuPlacement:"bottom"}))),W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Filter",labelWidth:Re,grow:!0},W.a.createElement(H.Select,{options:ue,value:ue.find((function(t){return t.value===e.filter}))||ue[0],onChange:this.onFilterChange,placeholder:"Select a property",menuPlacement:"bottom"}))))},t}(B.PureComponent),pe=n(3),de=function(e){var t=e.logoUrl,n=e.title,r=e.description,a=e.labels,o=e.actions,i=e.onClick,s=e.ariaLabel,l=e.className,u=Object(pe.cx)("add-data-source-item",l);return W.a.createElement("div",{className:u,onClick:i,"aria-label":s},t&&W.a.createElement("img",{className:"add-data-source-item-logo",src:t}),W.a.createElement("div",{className:"add-data-source-item-text-wrapper"},W.a.createElement("span",{className:"add-data-source-item-text"},n),r&&W.a.createElement("span",{className:"add-data-source-item-desc"},r),a&&W.a.createElement("div",null,a)),o&&W.a.createElement("div",{className:"add-data-source-item-actions"},o))},he=function(e){var t=e.asset,n=e.onInspect,r=e.onSelect;return W.a.createElement(de,{title:t.name,description:t.id,onClick:function(){return r(t.id)},actions:W.a.createElement(W.a.Fragment,null,n&&W.a.createElement(H.Button,{variant:"secondary",onClick:function(e){e.stopPropagation(),n(t.id)},icon:"folder"},"BROWSE"),W.a.createElement(H.Button,{variant:"primary",icon:"check"},"SELECT"))})},fe=Object(H.stylesFactory)((function(e){return{container:Object(pe.css)(oe||(oe=d(["\n      width: 100%;\n      height: auto;\n    "],["\n      width: 100%;\n      height: auto;\n    "]))),listItem:Object(pe.css)(ie||(ie=d(["\n      ","\n    "],["\n      ","\n    "])),H.styleMixins.listItem(e))}})),ve=function(e){var t=e.listInfo,n=e.assets,r=e.search,a=e.onSelect,o=e.onInspect,i=e.open,s=void 0===i||i,l=Object(H.useTheme2)(),u=fe(l),c=t?W.a.createElement(H.Label,{description:t.description},t.name):"",p=function(){if(!n)return W.a.createElement("div",{key:null==t?void 0:t.id},W.a.createElement(H.Spinner,null),"Loading assets...");if(!n.length)return W.a.createElement(W.a.Fragment,null);var e=r?r.toLowerCase():"",i=r?n.filter((function(t){return t.name.toLowerCase().indexOf(e)>=0})):n;return!i.length&&r?W.a.createElement("div",{key:null==t?void 0:t.id},"No assets match: ",r):W.a.createElement("div",{key:null==t?void 0:t.id},i.map((function(e){return W.a.createElement(he,{asset:e,key:e.id,onInspect:o,onSelect:a})})))};return t?W.a.createElement("div",{className:u.container},W.a.createElement(H.CollapsableSection,{label:c,isOpen:s},p())):p()},ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onModelIdChange=function(e){return s(t,void 0,void 0,(function(){var t,n,r;return l(this,(function(a){switch(a.label){case 0:return(t=e.value)?[4,this.props.cache.getAssetsOfType(t)]:[3,2];case 1:return r=a.sent(),[3,3];case 2:r=void 0,a.label=3;case 3:return n=r,this.setState({modelId:t,assets:n}),[2]}}))}))},t.onAssetChanged=function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){return e&&this.props.onAssetChanged(e),[2]}))}))},t.onSearchChange=function(e){t.setState({search:e.currentTarget.value})},t}return o(t,e),t.prototype.componentDidMount=function(){var e,t;return s(this,void 0,void 0,(function(){var n,r,a,o,i,s;return l(this,(function(l){switch(l.label){case 0:return n=this.props,r=n.asset,a=n.cache,s={},[4,a.getModels()];case 1:return s.models=l.sent(),(o=s).modelId=null!==(e=null==r?void 0:r.model_id)&&void 0!==e?e:null===(t=o.models)||void 0===t?void 0:t.get(0).id,i=o,[4,a.getAssetsOfType(o.modelId)];case 2:return i.assets=l.sent(),this.setState(o),[2]}}))}))},t.prototype.render=function(){var e=this.state,t=e.models,n=e.assets,r=e.modelId,a=e.search;if(!t)return W.a.createElement("div",null,W.a.createElement(H.Spinner,null),"Loading models...");var o=t.map((function(e){return{value:e.id,label:e.name,description:e.description}})),i=o.find((function(e){return e.value===r}));return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{style:{height:"60vh"}},W.a.createElement("h4",null,"Model:"),W.a.createElement(H.Select,{options:o,value:i||{},onChange:this.onModelIdChange,backspaceRemovesValue:!0,isSearchable:!0,menuPlacement:"bottom"}),W.a.createElement("br",null),W.a.createElement("br",null),W.a.createElement("h4",null,"Assets:"),i&&n?W.a.createElement(W.a.Fragment,null,n.length>2&&W.a.createElement(W.a.Fragment,null,W.a.createElement(H.Input,{value:a,onChange:this.onSearchChange,placeholder:"search..."}),W.a.createElement("br",null)),W.a.createElement(ve,{search:a,assets:n.toArray(),onSelect:this.onAssetChanged})):W.a.createElement(W.a.Fragment,null,W.a.createElement("p",null),W.a.createElement("h6",null,"No assets found."))))},t}(B.Component),me=Object(H.stylesFactory)((function(e){return{container:Object(pe.css)(se||(se=d(["\n      width: 100%;\n      height: auto;\n      margin-top: 10px;\n    "],["\n      width: 100%;\n      height: auto;\n      margin-top: 10px;\n    "]))),listItem:Object(pe.css)(le||(le=d(["\n      ","\n    "],["\n      ","\n    "])),H.styleMixins.listItem(e))}})),ge=function(e){var t=e.asset,n=e.hierarchy,r=e.children,a=e.cache,o=e.search,i=e.onSelect,u=e.onInspect,p=c(Object(B.useState)(r),2),d=p[0],h=p[1],f=Object(H.useTheme2)(),v=me(f);return Object(B.useEffect)((function(){if(!r&&t&&a){s(void 0,void 0,void 0,(function(){var e;return l(this,(function(r){switch(r.label){case 0:return[4,a.getAssociatedAssets(t.id,n.id)];case 1:return e=r.sent(),h(e.toArray()),[2]}}))}))}}),[r,t,a,n.id]),W.a.createElement("div",{key:n.id,className:v.container},W.a.createElement(ve,{search:o,assets:d,listInfo:{id:n.id,description:n.id,name:n.name},onSelect:i,onInspect:u}))},be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={assets:[]},t.getParentInfo=function(e){return s(t,void 0,Promise,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this.props.cache.getAssociatedAssets(e)];case 1:return[2,q(t.sent())]}}))}))},t.onSetAssetId=function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this.setSelectedAssetInfo(e)];case 1:return t.sent(),[2]}}))}))},t.setSelectedAssetInfo=function(e){return s(t,void 0,void 0,(function(){var t,n,r,a;return l(this,(function(o){switch(o.label){case 0:return t=this.props.cache,e?(n=this.setState,r=[i({},this.state)],a={},[4,t.getAssetInfo(e)]):[3,4];case 1:return a.asset=o.sent(),[4,t.getAssetPickerOptions()];case 2:return a.assets=o.sent(),[4,this.getParentInfo(e)];case 3:n.apply(this,[i.apply(void 0,r.concat([(a.parents=o.sent(),a)]))]),o.label=4;case 4:return[2]}}))}))},t.onAssetChange=function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this.setSelectedAssetInfo(e.value)];case 1:return t.sent(),[2]}}))}))},t.onAssetSelected=function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){return e&&this.props.onAssetSelected(e),[2]}))}))},t.onSearchChange=function(e){t.setState({search:e.currentTarget.value})},t.renderHierarchies=function(){var e=t.state,n=e.asset,r=e.search;if(n)return n.hierarchy.length?W.a.createElement(W.a.Fragment,null,W.a.createElement("h5",null," Asset Hierarchies: "),W.a.createElement("div",{style:{height:"40vh",overflow:"auto"}},W.a.createElement(H.Input,{value:r,onChange:t.onSearchChange,placeholder:"search..."}),W.a.createElement("br",null),n.hierarchy.map((function(e){return W.a.createElement(ge,{key:e.value,hierarchy:{name:e.label,id:e.value},asset:n,search:r,cache:t.props.cache,onInspect:t.onSetAssetId,onSelect:t.onAssetSelected})})))):W.a.createElement("h6",null,"No hierarchies found for asset.")},t.renderParents=function(){var e=t.state.parents;return W.a.createElement(W.a.Fragment,null,W.a.createElement("h5",null," Parents: "),e?W.a.createElement(ve,{listInfo:{id:"",name:"Show Parents",description:""},assets:e,onSelect:t.onAssetSelected,onInspect:t.onSetAssetId,open:!1}):W.a.createElement("h6",null,"No parents found."))},t}return o(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,a,o,s,u;return l(this,(function(l){switch(l.label){case 0:return e=this.props,t=e.asset,n=e.cache,t?[4,this.getParentInfo(t.id)]:[3,2];case 1:return a=l.sent(),[3,3];case 2:a=void 0,l.label=3;case 3:return r=a,s=[i({},this.state)],u={asset:t},[4,n.getAssetPickerOptions()];case 4:return o=i.apply(void 0,s.concat([(u.assets=l.sent(),u.parents=r,u)])),this.setState(o),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.state,n=t.asset,r=t.assets,a=n?r.find((function(e){return e.value===n.id})):void 0;return!a&&n&&(a={label:n.name,value:n.id,description:n.arn}),W.a.createElement("div",{style:{height:"60vh"}},n?W.a.createElement(W.a.Fragment,null,W.a.createElement(this.renderParents,null),W.a.createElement("p",null),W.a.createElement("h5",null," Selected Asset: "),W.a.createElement(he,{asset:n,onSelect:function(){return e.onAssetSelected(null==n?void 0:n.id)}})):W.a.createElement(H.Select,{options:r,value:a,onChange:this.onAssetChange,placeholder:"Select an asset",allowCustomValue:!0,isClearable:!0,isSearchable:!0,onCreateOption:this.onSetAssetId,formatCreateLabel:function(e){return"Asset ID: "+e},menuPlacement:"bottom"}),W.a.createElement("br",null),this.renderHierarchies())},t}(B.Component),Ee=function(){return W.a.createElement("div",{className:"modal-header-title"},W.a.createElement(H.Icon,{name:"folder-open",size:"lg"}),W.a.createElement("span",{className:"p-l-1"},"Asset Browser"))},Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpen:!1,tab:"Hierarchy"},t.onSelectAsset=function(e){t.props.onAssetChanged(e),t.setState({isOpen:!1})},t}return o(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,a,o;return l(this,(function(i){switch(i.label){case 0:return e=this.props,t=e.assetId,n=e.region,r=this.props.datasource.getCache(n),t?[4,r.getAssetInfo(t)]:[3,2];case 1:return o=i.sent(),[3,3];case 2:o=void 0,i.label=3;case 3:return a=o,this.setState({cache:r,asset:a}),[2]}}))}))},t.prototype.componentDidUpdate=function(e){return s(this,void 0,void 0,(function(){var t,n,r,a,o,s;return l(this,(function(l){switch(l.label){case 0:return t=i({},this.state),n=!1,this.props.region!==e.region&&(n=!0,t.cache=this.props.datasource.getCache(this.props.region)),this.props.assetId===e.assetId?[3,4]:(r=this.state.cache,a=this.props.assetId,n=!0,o=t,a?[4,r.getAssetInfo(a)]:[3,2]);case 1:return s=l.sent(),[3,3];case 2:s=void 0,l.label=3;case 3:o.asset=s,l.label=4;case 4:return n&&this.setState(t),[2]}}))}))},t.prototype.renderBody=function(){var e=this.state,t=e.cache,n=e.tab,r=e.asset;if(!t)return W.a.createElement("div",null,W.a.createElement(H.Spinner,null),"Loading...");switch(n){case"Hierarchy":return W.a.createElement(be,{cache:t,asset:r,onAssetSelected:this.onSelectAsset});case"Modal":return W.a.createElement(ye,{cache:t,asset:r,onAssetChanged:this.onSelectAsset})}},t.prototype.render=function(){var e=this,t=this.state,n=t.isOpen,r=t.tab;return W.a.createElement(W.a.Fragment,null,W.a.createElement(H.Button,{variant:"secondary",size:"md",icon:"folder-open",onClick:function(t){return e.setState({isOpen:!0},(function(){}))}},"Explore"),W.a.createElement(H.Modal,{title:W.a.createElement(Ee,null),isOpen:n,onDismiss:function(){return e.setState({isOpen:!1})}},W.a.createElement("div",null,W.a.createElement("div",null,W.a.createElement(H.TabsBar,null,W.a.createElement(H.Tab,{label:"Hierarchy",active:"Hierarchy"===r,onChangeTab:function(){return e.setState({tab:"Hierarchy"})}}),W.a.createElement(H.Tab,{label:"By Model",active:"Modal"===r,onChangeTab:function(){return e.setState({tab:"Modal"})}})),W.a.createElement(H.TabContent,{style:{maxHeight:"90vh"}},W.a.createElement("div",null,this.renderBody()))))))},t}(B.Component),Ie=n(29),we=n.n(Ie),Se=function(e){return!0},Ce=function(e){return"STRING"!==e.DataType},_e=new r.Registry((function(){return[{id:m.AVERAGE,name:"Average",isValid:Ce},{id:m.COUNT,name:"Count",isValid:Se},{id:m.MAXIMUM,name:"Max",isValid:Ce},{id:m.MINIMUM,name:"Min",isValid:Ce},{id:m.SUM,name:"Sum",isValid:Ce},{id:m.STANDARD_DEVIATION,name:"Stddev",description:"Standard Deviation",isValid:Ce}]})),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkInput=function(){var e=t.props,n=e.stats,r=e.allowMultiple,a=e.defaultStat,o=e.onChange,i=_e.list(n);if(i.length!==n.length){var s=i.map((function(e){return e.id}));we()(n,s);o(i.map((function(e){return e.id})))}!r&&n.length>1&&o([n[0]]),a&&n.length<1&&o([a])},t.onSelectionChange=function(e){var n=t.props.onChange;Array.isArray(e)?n(e.map((function(e){return e.value}))):n(e&&e.value?[e.value]:[])},t}return o(t,e),t.prototype.componentDidMount=function(){this.checkInput()},t.prototype.componentDidUpdate=function(e){this.checkInput()},t.prototype.render=function(){var e=this.props,t=e.stats,n=e.allowMultiple,r=e.defaultStat,a=e.className,o=e.menuPlacement,i=e.assetPropInfo,s=_e.selectOptions(t);return i&&"STRING"===i.DataType&&(s.options=_e.list().filter((function(e){return e.isValid(i)}))),W.a.createElement(H.Select,{value:s.current,className:a,isClearable:!r,isMulti:n,isSearchable:!0,options:s.options,onChange:this.onSelectionChange,menuPlacement:o})},t.defaultProps={allowMultiple:!0},t}(B.PureComponent),Oe=[{value:f.ANY,label:"ANY"},{value:f.GOOD,label:"GOOD"},{value:f.BAD,label:"BAD"},{value:f.UNCERTAIN,label:"UNCERTAIN"}],Pe=[{value:v.ASCENDING,label:"ASCENDING"},{value:v.DESCENDING,label:"DESCENDING"}],De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onQualityChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{quality:e.value})),o()},t.onOrderChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{timeOrdering:e.value})),o()},t.onMaxPageAggregations=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{maxPageAggregations:+e.currentTarget.value})),o()},t}return o(t,e),t.prototype.render=function(){var e,t,n=this.props.query;return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Quality",labelWidth:Re},W.a.createElement(H.Select,{width:20,options:Oe,value:null!==(e=Oe.find((function(e){return e.value===n.quality})))&&void 0!==e?e:Oe[0],onChange:this.onQualityChange,isSearchable:!0,menuPlacement:"bottom"})),W.a.createElement(H.InlineField,{label:"Time",labelWidth:8},W.a.createElement(H.Select,{options:Pe,value:null!==(t=Pe.find((function(e){return e.value===n.timeOrdering})))&&void 0!==t?t:Pe[0],onChange:this.onOrderChange,isSearchable:!0,menuPlacement:"bottom"}))))},t}(B.PureComponent),Te=[{value:y.Auto,label:"Auto",description:"Picks a resolution based on the time window. Will switch to raw data if higher than 1m resolution is needed"},{value:y.Min,label:"Minute",description:"1 point every minute"},{value:y.Hour,label:"Hour",description:"1 point every hour"},{value:y.Day,label:"Day",description:"1 point every day"}],je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={assets:[],loading:!0,openModal:!1},t.onAliasChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{propertyAlias:e.currentTarget.value})),o()},t.onAssetChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{assetId:e.value})),o()},t.onPropertyChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery,s=i(i({},a),{propertyId:e.value});if(E(s)&&s.propertyId){var l=re(t.state.asset,s.propertyId);s.aggregates||(s.aggregates=[]),l&&(s.aggregates=s.aggregates.filter((function(e){return _e.get(e).isValid(l)}))),s.aggregates.length||(s.aggregates=[ae(l)])}r(s),o()},t.onSetAssetId=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{assetId:e})),o()},t.onSetPropertyId=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{propertyId:e})),o()},t.onSetHierarchyId=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{hierarchyId:e})),o()},t.onHierarchyIdChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery,s=i({},a);b(s)&&(e.value&&e.value.length?s.hierarchyId=e.value:delete s.hierarchyId),r(s),o()},t.onAggregateChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{aggregates:e})),o()},t.onResolutionChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{resolution:e.value})),o()},t}return o(t,e),t.prototype.updateInfo=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return l(this,(function(s){switch(s.label){case 0:if(e=this.props,t=e.query,n=e.datasource,r={loading:!1},a=n.getCache(t.region),!(null==t?void 0:t.assetId))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),o=r,[4,a.getAssetInfo(t.assetId)];case 2:return o.asset=s.sent(),[3,4];case 3:return s.sent(),r.property=void 0,[3,4];case 4:r.property=re(r.asset,t.propertyId),s.label=5;case 5:return s.trys.push([5,7,,8]),i=r,[4,a.getAssetPickerOptions()];case 6:return i.assets=s.sent(),[3,8];case 7:return s.sent(),[3,8];case 8:return this.setState(r),[2]}}))}))},t.prototype.componentDidMount=function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return this.updateInfo(),[2]}))}))},t.prototype.componentDidUpdate=function(e){var t,n,r;return s(this,void 0,void 0,(function(){var a,o,i,s;return l(this,(function(l){return a=this.props.query,o=(null==a?void 0:a.assetId)!==(null===(t=null==e?void 0:e.query)||void 0===t?void 0:t.assetId),i=(null==a?void 0:a.propertyId)!==(null===(n=null==e?void 0:e.query)||void 0===n?void 0:n.propertyId),s=(null==a?void 0:a.region)!==(null===(r=null==e?void 0:e.query)||void 0===r?void 0:r.region),(o||i||s)&&(a.assetId||s?(this.setState({loading:!0}),this.updateInfo()):this.setState({asset:void 0,property:void 0,loading:!1})),[2]}))}))},t.prototype.renderAggregateRow=function(e){var t,n=this.state.property;return W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Aggregate",labelWidth:Re,grow:!0},W.a.createElement(xe,{stats:null!==(t=e.aggregates)&&void 0!==t?t:[],onChange:this.onAggregateChange,defaultStat:ae(n),menuPlacement:"bottom"})),W.a.createElement(H.InlineField,{label:"Resolution",labelWidth:10},W.a.createElement(H.Select,{width:18,options:Te,value:Te.find((function(t){return t.value===e.resolution}))||Te[0],onChange:this.onResolutionChange,menuPlacement:"bottom"})))},t.prototype.renderAssociatedAsset=function(e){var t=this.state,n=t.asset,r=t.loading,a=[{value:"",label:"** Parent **"}];n&&a.push.apply(a,p([],c(n.hierarchy)));var o=a.find((function(t){return t.value===e.hierarchyId}));return o||(e.hierarchyId?(o={value:e.hierarchyId,label:"ID: "+e.hierarchyId},a.push(o)):o=a[0]),W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Show",labelWidth:Re,grow:!0},W.a.createElement(H.Select,{isLoading:r,options:a,value:o,onChange:this.onHierarchyIdChange,placeholder:"Select...",allowCustomValue:!0,backspaceRemovesValue:!0,isClearable:!0,isSearchable:!0,onCreateOption:this.onSetHierarchyId,formatCreateLabel:function(e){return"Hierarchy Id: "+e},menuPlacement:"bottom"})))},t.prototype.render=function(){var e=this.props,t=e.query,n=e.datasource,r=this.state,a=r.loading,o=r.asset,s=r.assets,l=t.assetId?s.find((function(e){return e.value===t.assetId})):void 0;!l&&t.assetId&&(l=a?{label:"loading...",value:t.assetId}:o?{label:o.name,description:t.assetId,value:t.assetId}:{label:"ID: "+t.assetId,value:t.assetId});var u,c=b(t),p=!c&&(t.propertyId||t.assetId),d=p&&o?o.properties:[],f=t.propertyId&&E(t)||(null==(u=t)?void 0:u.queryType)===h.PropertyValueHistory,v=d.find((function(e){return e.Id===t.propertyId}));!v&&t.propertyId&&(v={value:t.propertyId,label:"ID: "+t.propertyId});var y=W.a.createElement("div",null,"Setting an alias for an asset property. ",W.a.createElement("br",null),W.a.createElement(H.LinkButton,{href:"https://docs.aws.amazon.com/iot-sitewise/latest/userguide/connect-data-streams.html",target:"_blank"},"API Docs ",W.a.createElement(H.Icon,{name:"external-link-alt"})));return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Property Alias",labelWidth:Re,grow:!0,tooltip:y},W.a.createElement(H.Input,{value:t.propertyAlias,onChange:this.onAliasChange,placeholder:"optional alias that identifies the property, such as an OPC-UA server data stream path"}))),!Boolean(t.propertyAlias)&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Asset",labelWidth:Re,grow:!0},W.a.createElement(H.Select,{key:t.region?t.region:"default",isLoading:a,options:s,value:l,onChange:this.onAssetChange,placeholder:"Select an asset",allowCustomValue:!0,isClearable:!0,isSearchable:!0,onCreateOption:this.onSetAssetId,formatCreateLabel:function(e){return"Asset ID: "+e},menuPlacement:"bottom"})),W.a.createElement(Ae,{datasource:n,region:t.region,assetId:t.assetId,onAssetChanged:this.onSetAssetId})),p&&W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Property",labelWidth:Re,grow:!0},W.a.createElement(H.Select,{isLoading:a,options:d,value:v,onChange:this.onPropertyChange,placeholder:"Select a property",allowCustomValue:!0,isSearchable:!0,onCreateOption:this.onSetPropertyId,formatCreateLabel:function(e){return"Property ID: "+e},menuPlacement:"bottom"})))),(p||t.propertyAlias)&&f&&W.a.createElement(W.a.Fragment,null,E(t)&&this.renderAggregateRow(t),W.a.createElement(De,i({},this.props))),c&&this.renderAssociatedAsset(t))},t}(B.PureComponent),Ne={maxPageAggregations:1},Re=15,Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onQueryTypeChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(ne(a,e)),o()},t.onRegionChange=function(e){var n=t.props,r=n.onChange,a=n.query,o=n.onRunQuery;r(i(i({},a),{assetId:void 0,propertyId:void 0,region:e.value})),o()},t}return o(t,e),t.prototype.renderQuery=function(e){if(e.queryType){switch(e.queryType){case h.ListAssetModels:return null;case h.ListAssets:return W.a.createElement(ce,i({},this.props,{query:e}));case h.ListAssociatedAssets:case h.PropertyValue:case h.PropertyAggregate:case h.PropertyValueHistory:return W.a.createElement(je,i({},this.props))}return W.a.createElement("div",null,"Missing UI for query type: ",e.queryType)}},t.prototype.render=function(){var e,t=this.props.datasource,n=ee()(this.props.query,Ne),r={label:"Default",desctiption:null===(e=t.options)||void 0===e?void 0:e.defaultRegion,value:void 0},a=n.region?p([r],c($)):$,o=te.find((function(e){return e.value===n.queryType})),i=o?W.a.createElement("div",null,o.description," ",W.a.createElement("br",null),W.a.createElement(H.LinkButton,{href:o.helpURL,target:"_blank"},"API Docs ",W.a.createElement(H.Icon,{name:"external-link-alt"}))):void 0;return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"gf-form"},W.a.createElement(H.InlineField,{label:"Query type",labelWidth:Re,grow:!0,tooltip:i},W.a.createElement(H.Select,{options:te,value:o,onChange:this.onQueryTypeChange,placeholder:"Select query type",menuPlacement:"bottom"})),W.a.createElement(H.InlineField,{label:"Region",labelWidth:14},W.a.createElement(H.Select,{width:18,options:a,value:$.find((function(e){return e.value===n.region}))||r,onChange:this.onRegionChange,backspaceRemovesValue:!0,allowCustomValue:!0,isClearable:!0,menuPlacement:"bottom"}))),this.renderQuery(n))},t}(B.PureComponent);n.d(t,"plugin",(function(){return Fe}));var Fe=new r.DataSourcePlugin(Q).setConfigEditor(X).setMetadataInspector(J).setQueryEditor(Me)}])}));
//# sourceMappingURL=module.js.map